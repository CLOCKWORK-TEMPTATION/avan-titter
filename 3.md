

================================================================================
# الملف: H:\حبيبي_يارب\src\README.md
================================================================================

# ملفات المشروع الرئيسية

هذا الدليل يشرح الملفات الرئيسية في مجلد `src` وكيفية تفاعلها مع بعضها البعض.

## 1. `index.js`

### الوظيفة:
ملف الدخول الرئيسي للتطبيق الذي يقوم بتهيئة تطبيق React وعرض مكون `App` في عنصر الجذر (root) في ملف HTML.

### المحتويات الرئيسية:
- استيراد مكتبات React الأساسية
- استيراد مكون `App` الرئيسي
- إنشاء جذر React وعرض مكون `App` بداخله

### مثال الاستخدام:
```javascript
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
```

## 2. `index.tsx`

### الوظيفة:
ملف بديل لـ `index.js` مكتوب بـ TypeScript، ويقوم بنفس الوظيفة مع إضافة بعض الميزات الإضافية.

### الفروق الرئيسية عن `index.js`:
- مكتوب بـ TypeScript (امتداد .tsx)
- يستخدم TypeScript للتحقق من الأنواع
- يحتوي على تعليقات توضيحية للأنواع

## 3. `App.js`

### الوظيفة:
المكون الرئيسي للتطبيق الذي يعمل كنقطة بداية لتطبيق React.

### المهام الرئيسية:
- استيراد وتصيير مكون `ScreenplayEditor`
- يعمل كحاوية رئيسية للتطبيق
- يمكن إضافة توفيقات وتوجيهات عامة هنا

### مثال المحتوى:
```javascript
import React from 'react';
import ScreenplayEditor from './components/ScreenplayEditor';

function App() {
  return <ScreenplayEditor />;
}

export default App;
```

## 4. `index.css`

### الوظيفة:
يحتوي على الأنماط العامة والمشتركة للتطبيق بأكمله.

### المحتويات الرئيسية:
1. **إعادة تعيين الأنماط (Reset):**
   - إزالة الهوامش الافتراضية
   - تعيين `box-sizing: border-box`

2. **أنماط أساسية للجسم (body):**
   - خط افتراضي
   - اتجاه النص من اليمين لليسار (RTL)
   - تحسين وضوح الخطوط

3. **تخصيص شريط التمرير:**
   - عرض ولون شريط التمرير
   - تأثيرات التحويم

4. **دعم الوضع المظلم:**
   - أنماط تلقائية للوضع المظلم
   - ألوان متناسقة للوضع الليلي

## كيف تعمل معًا

1. يبدأ التطبيق بتحميل `index.js` (أو `index.tsx` إذا كان مدعومًا)
2. يقوم `index.js` بتحميل `App` من `App.js` وعرضه
3. يقوم `App` بتحميل وعرض مكون `ScreenplayEditor`
4. يتم تطبيق الأنماط من `index.css` على التطبيق بأكمله

## ملاحظات هامة

- `index.js` هو نقطة الدخول الافتراضية لتطبيقات React
- `App.js` هو المكون الجذري (Root Component) للتطبيق
- `index.css` يتم تطبيقه عالميًا على التطبيق بأكمله
- `index.tsx` هو بديل TypeScript لـ `index.js` مع دعم إضافي للأنواع


================================================================================
# الملف: H:\حبيبي_يارب\src\agents\README.md
================================================================================

# نظام الوكلاء الذكيين (Agents System)

## نظرة عامة
نظام الوكلاء الذكيين هو قلب التطبيق المسؤول عن تحليل وتنسيق النصوص البرمجية (Screenplay) بشكل تلقائي. يعمل النظام على مبدأ "سلسلة المسؤولية" حيث يقوم كل وكيل بمعالجة الأسطر التي تتناسب مع تخصصه.

## قائمة الوكلاء

### 1. AgentCoordinator
**الوظيفة الرئيسية**: منسق الوكلاء الرئيسي الذي يدير تدفق العمل بين جميع الوكلاء.

**الميزات**:
- إدارة أولويات تنفيذ الوكلاء
- معالجة الأسطر الفردية أو النصوص الكاملة
- تحليل إحصائي لنتائج المعالجة

**طريقة الاستخدام**:
```javascript
const coordinator = new AgentCoordinator();
// معالجة سطر واحد
const result = coordinator.processLine("عمر: مرحبا بالجميع");
// معالجة نص كامل
const { results, stats } = coordinator.processScript(["المشهد الأول", "عمر: مرحبا"]);
```

### 2. CharacterDialogueAgent
**المسؤولية**: التعرف على حوارات الشخصيات.

**يتميز بـ**:
- التعرف على أسماء الشخصيات المتبوعة بنقطتين
- دعم الحوارات المستمرة
- تتبع سياق الحوار

### 3. ActionAgent
**المسؤولية**: معالجة أفعال المشهد.

**يصنف الإجراءات إلى**:
- حركات
- عواطف
- إشارات زمنية
- إجراءات عامة

### 4. SceneHeaderAgent
**المسؤولية**: التعرف على عناوين المشاهد.

**يتعرف على**:
- المشاهد المرقمة (مثل: مشهد 1 - ليل - داخلي)
- مواقع المشاهد
- الأوقات (ليل، نهار، إلخ)

### 5. TransitionAgent
**المسؤولية**: التعرف على الانتقالات السينمائية.

**يدعم**:
- الانتقالات القياسية (قطع، تدرج، إلخ)
- التأثيرات البصرية

### 6. DirectorNotesAgent
**المسؤولية**: التعامل مع ملاحظات المخرج.

**يتميز بـ**:
- التعرف على الملاحظات بين قوسين
- تمييزها عن النص العادي

### 7. SmartContextAgent
**المسؤولية**: تحليل السياق الذكي.

**يقدم**:
- تحليلًا سياقيًا للنص
- تحسينات ذكية بناءً على المحتوى

### 8. CharacterAgent
**المسؤولية**: إدارة معلومات الشخصيات.

**يتتبع**:
- أسماء الشخصيات
- صفاتها
- علاقاتها

### 9. DefaultAgent
**المسؤولية**: المعالج الافتراضي للأسطر التي لا تتطابق مع أي وكيل آخر.

## هيكل البيانات

### نموذج الاستجابة
كل وكيل يرجع كائنًا يحتوي على:

```typescript
{
  html: string,           // HTML الناتج
  processed: boolean,     // هل تمت معالجة السطر بنجاح؟
  confidence: number,     // درجة الثقة في النتيجة (0-1)
  elementType: string,    // نوع العنصر (مثل 'character-dialogue', 'action')
  agentUsed: string,      // اسم الوكيل الذي قام بالمعالجة
  originalLine: string,   // النص الأصلي
  context: object         // سياق المعالجة
}
```

## أمثلة متقدمة

### إنشاء وكيل مخصص
```javascript
function CustomAgent(line, ctx) {
  if (line.includes('خاص')) {
    return {
      html: `<div class="custom">${line}</div>`,
      processed: true,
      confidence: 0.9,
      elementType: "custom-type",
      agentUsed: "CustomAgent",
      originalLine: line,
      context: ctx
    };
  }
  return null;
}

// إضافة الوكيل المنسق
const coordinator = new AgentCoordinator([CustomAgent]);
```

### معالجة سيناريو كامل
```javascript
const script = [
  'المشهد 1 - ليل - داخلي',
  'عمر: (بحماس) مرحبا بالجميع!',
  'سارة: أهلاً وسهلاً!',
  '- يدخل أحمد من الباب الخلفي'
];

const { results, stats } = coordinator.processScript(script);
console.log('إحصائيات المعالجة:', stats);
```

## أفضل الممارسات

1. **ترتيب الوكلاء**:
   - الأكثر تحديدًا أولاً
   - الأقل تحديدًا لاحقًا
   - الوكيل الافتراضي دائمًا في النهاية

2. **إدارة السياق**:
   - تجنب تعديل السياق إلا عند الضرورة
   - الحفاظ على تناسق البيانات

3. **أداء النظام**:
   - تحسين التعبيرات المنتظمة
   - تجنب الحلقات المفرطة
   - استخدام الذاكرة المؤقتة عند الحاجة

## التكامل مع النظام

1. **الواردات**:
   ```javascript
   import { AgentCoordinator } from './agents/AgentCoordinator';
   import { CustomAgent } from './agents/CustomAgent';
   ```

2. **التكوين**:
   ```javascript
   const agents = [
     // قائمة الوكلاء المخصصة (اختياري)
     CustomAgent
   ];
   
   const coordinator = new AgentCoordinator(agents);
   ```

3. **المعالجة**:
   ```javascript
   // معالجة سطر واحد
   const result = coordinator.processLine('عمر: مرحبا');
   
   // معالجة نص كامل
   const { results } = coordinator.processScript(normalizedText);
   ```

## استكشاف الأخطاء وإصلاحها

### مشكلة: عدم التعرف على تنسيق معين
**الحل**: تأكد من:
1. تطابق التعبير المنتظم مع النمط المطلوب
2. أن الوكيل موجود في السلسلة بترتيب صحيح
3. أن درجة الثقة كافية

### مشكلة: تعارض في المعالجة
**الحل**:
1. تحقق من أولويات الوكلاء
2. تأكد من أن الوكلاء الأكثر تحديدًا يأتون أولاً
3. استخدم السجل (logging) لمتابعة سير المعالجة

## التطوير المستقبلي

1. **إضافة وكلاء جدد**:
   - إنشاء ملف وكيل جديد
   - تصدير الدالة
   - إضافتها إلى `AgentCoordinator`

2. **تحسين الأداء**:
   - تحسين التعبيرات المنتظمة
   - إضافة ذاكرة تخزين مؤقت للنتائج المتكررة

3. **التعلم الآلي**:
   - دمج نماذج لغة طبيعية
   - تحسين دقة التصنيف

## الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE).

---

تم تطوير هذا النظام ليكون قابلًا للتوسع وسهل التكامل مع أنظمة إدارة النصوص البرمجية الأخرى. للاستفسارات أو المساهمة، يرجى الرجوع إلى وثائق المساهمة.


================================================================================
# الملف: H:\حبيبي_يارب\src\components\ScreenplayEditor.md
================================================================================

# مكون ScreenplayEditor

## نظرة عامة
`ScreenplayEditor` هو المكون الرئيسي في تطبيق محرر النصوص البرمجية (Screenplay). يعمل كواجهة المستخدم الأساسية التي تتيح للمستخدمين إنشاء وتحرير النصوص البرمجية بشكل احترافي.

## المميزات الرئيسية

### 1. واجهة مستخدم متكاملة
- شريط أدوات تنسيق متكامل
- دعم كامل للغة العربية (من اليمين لليسار)
- واجهة مستخدم قابلة للتخصيص
- دعم الوضع المظلم والفاتح

### 2. إدارة المستندات
- إنشاء مستندات نصية جديدة
- فتح وحفظ المستندات
- تنسيق النصوص البرمجية تلقائيًا
- دعم متعدد الصفحات

### 3. أدوات التنسيق
- تنسيق النصوص البرمجية (مشاهد، شخصيات، حوارات، إلخ)
- تغيير نوع وحجم الخط
- تنسيق الفقرات والنصوص
- دعم الألوان والخطوط المخصصة

## الخصائص (Props)

| الخاصية | النوع | الوصف |
|---------|------|--------|
| `initialContent` | String | المحتوى الابتدائي للمحرر (اختياري) |
| `onContentChange` | Function | دالة تُستدعى عند تغيير المحتوى |
| `defaultFormat` | String | التنسيق الافتراضي للنص (افتراضيًا: 'action') |

## الحالة (State)

### حالة التنسيق الحالي
- `currentFormat`: نوع التنسيق الحالي (مثل 'scene', 'character', 'dialogue')
- `selectedFont`: الخط المحدد حاليًا
- `selectedSize`: حجم الخط الحالي

### حالة واجهة المستخدم
- `isDarkMode`: تفعيل/تعطيل الوضع المظلم
- `showRulers`: إظهار/إخفاء المساطر
- `showFontMenu`: إظهار/إخفاء قائمة الخطوط
- `showSizeMenu`: إظهار/إخفاء قائمة أحجام الخط

## الوظائف الرئيسية

### `applyFormatToCurrentLine(formatType)`
تطبق تنسيقًا معينًا على السطر الحالي.

**المعاملات:**
- `formatType` (String): نوع التنسيق المطلوب تطبيقه

### `formatText(command, value)`
تطبق أمر تنسيق على النص المحدد.

**المعاملات:**
- `command` (String): أمر التنسيق (مثل 'bold', 'italic')
- `value` (String): القيمة المطلوبة للأمر (اختياري)

### `handleContentChange()`
تُستدعى عند تغيير محتوى المحرر.

### `handlePaste(e)`
تتعامل مع أحداث لصق النص في المحرر.

## المكونات الفرعية

### 1. `FormatToolbar`
شريط الأدوات الخاص بالتنسيق.

### 2. `TextEditor`
منطقة تحرير النص الرئيسية.

### 3. `MenuBar`
شريط القوائم العلوي.

### 4. `Ruler`
المسطرة الجانبية.

### 5. `Dialogs`
مربعات الحوار المختلفة (بحث، استبدال، إلخ).

## أمثلة الاستخدام

```jsx
import React from 'react';
import ScreenplayEditor from './components/ScreenplayEditor';

function App() {
  const handleContentChange = (content) => {
    console.log('تم تحديث المحتوى:', content);
  };

  return (
    <div className="app">
      <ScreenplayEditor
        initialContent="<div>محتوى أولي</div>"
        onContentChange={handleContentChange}
        defaultFormat="action"
      />
    </div>
  );
}

export default App;
```

## الملاحظات التقنية

- يستخدم React Hooks لإدارة الحالة
- يدعم التنسيق المباشر (WYSIWYG)
- متوافق مع معايير الويب الحديثة
- يدعم إمكانية الوصول (Accessibility)

## التبعيات

- React (الإصدار 16.8 أو أحدث)
- مكتبة lucide-react للأيقونات
- أدوات مساعدة مخصصة (من مجلد utils)
- الثوابت المعرفة مسبقًا (من مجلد constants)

## التخصيص

يمكن تخصيص المكون من خلال:

1. **الأنماط (Styles):**
   - تخصيص الألوان والخطوط
   - تعديل المسافات والهوامش

2. **السلوك (Behavior):**
   - تخصيص اختصارات لوحة المفاتيح
   - إضافة تنسيقات مخصصة

3. **الوظائف (Functionality):**
   - إضافة معالجات أحداث مخصصة
   - دمج مع أنظمة تخزين خارجية

## دليل المطور

### التطوير المحلي

1. استنساخ المستودع
2. تثبيت التبعيات: `npm install`
3. تشغيل خادم التطوير: `npm start`

### الاختبار

```bash
npm test
```

### البناء للإنتاج

```bash
npm run build
```

## المساهمة

نرحب بمساهماتكم! يرجى قراءة [دليل المساهمة](CONTRIBUTING.md) للحصول على تفاصيل حول عملية إرسال طلبات السحب (Pull Requests).

## الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE).


================================================================================
# الملف: H:\حبيبي_يارب\src\components\Editor\README.md
================================================================================

# مكون TextEditor

## نظرة عامة
`TextEditor` هو المكون المسؤول عن واجهة تحرير النصوص البرمجية (Screenplay) في التطبيق. يوفر واجهة مستخدم تفاعلية لتحرير النصوص البرمجية مع دعم كامل للغة العربية.

## المميزات الرئيسية

### 1. تحرير النصوص البرمجية
- دعم كامل للغة العربية (من اليمين لليسار)
- تنسيق تلقائي للعناصر البرمجية (مشاهد، شخصيات، حوارات)
- دعم اختصارات لوحة المفاتيح
- معالجة ذكية للنسخ واللصق

### 2. تنسيق النصوص
- تغيير نوع الخط وحجمه
- تنسيق الفقرات والعناوين
- دعم الألوان والخطوط المخصصة
- تنسيق تلقائي عند الكتابة

### 3. واجهة المستخدم
- عرض الصفحات بتنسيق A4
- دعم الوضع المظلم
- مساطر وأدلة بصرية
- أزرار تحكم سهلة الاستخدام

## الخصائص (Props)

| الخاصية | النوع | الوصف |
|---------|------|--------|
| `editorRef` | Ref | مرجع لعنصر المحرر |
| `selectedFont` | String | الخط المحدد حاليًا |
| `selectedSize` | String | حجم الخط الحالي |
| `currentFormat` | String | تنسيق النص الحالي |
| `setCurrentFormat` | Function | دالة لتحديث تنسيق النص |
| `updateContent` | Function | دالة تحديث المحتوى |
| `isDarkMode` | Boolean | تفعيل/تعطيل الوضع المظلم |
| `pageCount` | Number | عدد الصفحات |
| `showRulers` | Boolean | إظهار/إخفاء المساطر |

## الوظائف الرئيسية

### `applyFormatToCurrentLine(formatType)`
تطبق تنسيقًا معينًا على السطر الحالي.

**المعاملات:**
- `formatType` (String): نوع التنسيق المطلوب تطبيقه

### `handleKeyDown(e)`
تتعامل مع أحداث لوحة المفاتيح.

**المعاملات:**
- `e` (Event): حدث لوحة المفاتيح

### `handleSmartFormat()`
تطبق تنسيقًا ذكيًا على النص المحدد.

### `loadSampleText()`
تحميل نص تجريبي في المحرر.

## أمثلة الاستخدام

```jsx
import React, { useRef, useState } from 'react';
import TextEditor from './components/Editor/TextEditor';

function App() {
  const editorRef = useRef(null);
  const [currentFormat, setCurrentFormat] = useState('action');
  const [selectedFont, setSelectedFont] = useState('Amiri');
  const [selectedSize, setSelectedSize] = useState('14pt');
  
  const updateContent = () => {
    // معالجة تحديث المحتوى
  };

  return (
    <div className="app">
      <TextEditor
        editorRef={editorRef}
        selectedFont={selectedFont}
        selectedSize={selectedSize}
        currentFormat={currentFormat}
        setCurrentFormat={setCurrentFormat}
        updateContent={updateContent}
        isDarkMode={false}
        pageCount={1}
        showRulers={true}
      />
    </div>
  );
}

export default App;
```

## الملاحظات التقنية

- يستخدم `contentEditable` لتحرير النصوص
- يدعم أحدث معايير الويب (HTML5, CSS3)
- متوافق مع أجهزة سطح المكتب والأجهزة اللوحية
- يدعم إمكانية الوصول (Accessibility)

## التبعيات

- React (الإصدار 16.8 أو أحدث)
- مكتبة lucide-react للأيقونات
- أدوات مساعدة مخصصة (من مجلد utils)
- الثوابت المعرفة مسبقًا (من مجلد constants)

## التخصيص

يمكن تخصيص المكون من خلال:

1. **الأنماط (Styles):**
   - تخصيص الألوان والخطوط
   - تعديل المسافات والهوامش

2. **السلوك (Behavior):**
   - تخصيص اختصارات لوحة المفاتيح
   - إضافة تنسيقات مخصصة

## دليل المطور

### التطوير المحلي

1. استنساخ المستودع
2. تثبيت التبعيات: `npm install`
3. تشغيل خادم التطوير: `npm start`

### الاختبار

```bash
npm test
```

### البناء للإنتاج

```bash
npm run build
```

## المساهمة

نرحب بمساهماتكم! يرجى قراءة [دليل المساهمة](CONTRIBUTING.md) للحصول على تفاصيل حول عملية إرسال طلبات السحب (Pull Requests).

## الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE).


================================================================================
# الملف: H:\حبيبي_يارب\src\components\Toolbars\README.md
================================================================================

# شريط التنسيق (FormatToolbar)

## نظرة عامة
`FormatToolbar` هو مكون React مسؤول عن شريط الأدوات الذي يتيح للمستخدمين تنسيق النص في محرر النصوص البرمجية. يوفر واجهة بديهية وسهلة الاستخدام لتطبيق أنماط مختلفة على النص.

## المميزات الرئيسية

### 1. تنسيق النصوص
- تنسيق النص بالخط العريض والمائل والتسطير
- تغيير حجم ولون الخط
- محاذاة النص (يمين، وسط، يسار)
- تنسيق ذكي للنصوص البرمجية

### 2. واجهة المستخدم
- تصميم متجاوب يعمل على جميع أحجام الشاشات
- دعم الوضع المظلم
- أزرار تفاعلية مع تلميحات
- قوائم منسدلة لاختيار الخطوط والأحجام

### 3. التكامل
- تكامل سلس مع مكون `TextEditor`
- دعم كامل للغة العربية (RTL)
- تكامل مع نظام الألوان المخصص

## الخصائص (Props)

| الخاصية | النوع | الوصف |
|---------|------|--------|
| `currentFormat` | String | التنسيق الحالي المحدد |
| `onFormatChange` | Function | دالة تستدعى عند تغيير تنسيق النص |
| `selectedFont` | String | الخط المحدد حاليًا |
| `setSelectedFont` | Function | دالة لتحديث الخط المحدد |
| `selectedSize` | String | حجم الخط الحالي |
| `setSelectedSize` | Function | دالة لتحديث حجم الخط |
| `showFontMenu` | Boolean | إظهار/إخفاء قائمة الخطوط |
| `setShowFontMenu` | Function | دالة للتحكم في عرض قائمة الخطوط |
| `showSizeMenu` | Boolean | إظهار/إخفاء قائمة الأحجام |
| `setShowSizeMenu` | Function | دالة للتحكم في عرض قائمة الأحجام |
| `showColorPicker` | Boolean | إظهار/إخفاء منتقي الألوان |
| `setShowColorPicker` | Function | دالة للتحكم في عرض منتقي الألوان |
| `onTextFormat` | Function | دالة لتطبيق تنسيق النص |
| `onSmartFormat` | Function | دالة لتطبيق التنسيق الذكي |
| `isDarkMode` | Boolean | تفعيل/تعطيل الوضع المظلم |

## المكونات الفرعية

### `Tooltip`
مكون مساعد لعرض تلميحات توضيحية عند التحويم فوق الأزرار.

## أمثلة الاستخدام

```jsx
import React, { useState } from 'react';
import FormatToolbar from './components/Toolbars/FormatToolbar';

function App() {
  const [currentFormat, setCurrentFormat] = useState('normal');
  const [selectedFont, setSelectedFont] = useState('Arial');
  const [selectedSize, setSelectedSize] = useState('14pt');
  const [showFontMenu, setShowFontMenu] = useState(false);
  const [showSizeMenu, setShowSizeMenu] = useState(false);
  const [showColorPicker, setShowColorPicker] = useState(false);
  const [isDarkMode, setIsDarkMode] = useState(false);

  const handleFormatChange = (format) => {
    setCurrentFormat(format);
    // تطبيق التنسيق على النص المحدد
  };

  const handleTextFormat = (format, value) => {
    // تطبيق تنسيق النص (عريض، مائل، إلخ)
    console.log(`تطبيق التنسيق: ${format}`, value || '');
  };

  const handleSmartFormat = () => {
    // تطبيق التنسيق الذكي
    console.log('تطبيق التنسيق الذكي');
  };

  return (
    <div className={`app ${isDarkMode ? 'dark' : ''}`}>
      <FormatToolbar
        currentFormat={currentFormat}
        onFormatChange={handleFormatChange}
        selectedFont={selectedFont}
        setSelectedFont={setSelectedFont}
        selectedSize={selectedSize}
        setSelectedSize={setSelectedSize}
        showFontMenu={showFontMenu}
        setShowFontMenu={setShowFontMenu}
        showSizeMenu={showSizeMenu}
        setShowSizeMenu={setShowSizeMenu}
        showColorPicker={showColorPicker}
        setShowColorPicker={setShowColorPicker}
        onTextFormat={handleTextFormat}
        onSmartFormat={handleSmartFormat}
        isDarkMode={isDarkMode}
      />
    </div>
  );
}

export default App;
```

## الملاحظات التقنية

- يستخدم مكتبة `lucide-react` للأيقونات
- يدعم التصميم المتجاوب (Responsive Design)
- متوافق مع معايير الويب الحديثة
- يدعم إمكانية الوصول (Accessibility)

## التخصيص

يمكن تخصيص المكون من خلال:

1. **الألوان:**
   - تخصيص ألوان الأزرار والخلفيات
   - دعم السمات المظلمة والفاتحة

2. **الخطوط:**
   - إضافة خطوط مخصصة
   - تعديل أحجام الخطوط المتاحة

3. **الوظائف:**
   - إضافة أزرار تنسيق إضافية
   - تخصيص سلوك التنسيق الذكي

## دليل المطور

### التطوير المحلي

1. استنساخ المستودع
2. تثبيت التبعيات: `npm install`
3. تشغيل خادم التطوير: `npm start`

### الاختبار

```bash
npm test
```

### البناء للإنتاج

```bash
npm run build
```

## المساهمة

نرحب بمساهماتكم! يرجى قراءة [دليل المساهمة](CONTRIBUTING.md) للحصول على تفاصيل حول عملية إرسال طلبات السحب (Pull Requests).

## الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE).


================================================================================
# الملف: H:\حبيبي_يارب\src\components\UI\README.md
================================================================================

# مكونات واجهة المستخدم (UI Components)

هذا الدليل يوثق المكونات الرئيسية لواجهة المستخدم في المشروع. تم تطوير هذه المكونات باستخدام React مع دعم كامل للغة العربية والوضع المظلم.

## قائمة المكونات

1. [Rulers.js](#rulersjs)
2. [SmartSuggestions.js](#smartsuggestionsjs)
3. [Dialogs.js](#dialogsjs)
4. [MenuBar.js](#menubarjs)

---

## Rulers.js

### نظرة عامة
مكون المساطر الذي يعرض مساطر أفقية وعمودية مع مؤشرات للهوامش لمساعدة المستخدمين على تنسيق المستند بشكل صحيح.

### المميزات
- عرض مساطر أفقية وعمودية
- مؤشرات للهوامش (أعلى، أسفل، يمين، يسار)
- دعم الوضع المظلم
- تخصيص المسافات بين العلامات

### الخصائص (Props)
| الخاصية | النوع | الوصف |
|---------|------|--------|
| `showRulers` | Boolean | إظهار/إخفاء المساطر |
| `isDarkMode` | Boolean | تفعيل/تعطيل الوضع المظلم |

### مثال
```jsx
<Rulers showRulers={true} isDarkMode={false} />
```

---

## SmartSuggestions.js

### نظرة عامة
مكون الاقتراحات الذكية الذي يعرض اقتراحات تلقائية بناءً على سياق النص الحالي.

### المميزات
- اقتراحات ذكية بناءً على نوع التنسيق الحالي
- دعم لسياقات مختلفة (عناوين المشاهد، الشخصيات، إلخ)
- واجهة مستخدم تفاعلية مع رسوم متحركة
- دعم الوضع المظلم

### الخصائص (Props)
| الخاصية | النوع | الوصف |
|---------|------|--------|
| `editorRef` | Ref | مرجع لعنصر المحرر |
| `currentFormat` | String | التنسيق الحالي للنص |
| `onApplySuggestion` | Function | دالة تستدعى عند تطبيق اقتراح |
| `isDarkMode` | Boolean | تفعيل/تعطيل الوضع المظلم |

### مثال
```jsx
<SmartSuggestions 
  editorRef={editorRef}
  currentFormat="character"
  onApplySuggestion={handleApplySuggestion}
  isDarkMode={false}
/>
```

---

## Dialogs.js

### نظرة عامة
مكون يحتوي على نوافذ حوار قابلة لإعادة الاستخدام في التطبيق.

### المكونات المتوفرة

#### 1. Dialog
نافذة حوار عامة يمكن تخصيصها.

#### 2. SearchDialog
نافذة حوار للبحث في النص.

#### 3. ReplaceDialog
نافذة حوار للبحث والاستبدال في النص.

#### 4. CharacterRenameDialog
نافذة حوار لإعادة تسمية الشخصيات.

### الخصائص المشتركة
| الخاصية | النوع | الوصف |
|---------|------|--------|
| `isOpen` | Boolean | إظهار/إخفاء نافذة الحوار |
| `onClose` | Function | دالة الإغلاق |
| `isDarkMode` | Boolean | تفعيل/تعطيل الوضع المظلم |

### مثال
```jsx
<SearchDialog 
  isOpen={showSearch}
  onClose={() => setShowSearch(false)}
  searchTerm={searchTerm}
  setSearchTerm={setSearchTerm}
  isDarkMode={isDarkMode}
/>
```

---

## MenuBar.js

### نظرة عامة
شريط القوائم الرئيسي للتطبيق.

### الميزات
- قوائم منسدلة متعددة
- دعم الاختصارات
- واجهة مستخدم متجاوبة
- دعم كامل للغة العربية

### الخصائص (Props)
| الخاصية | النوع | الوصف |
|---------|------|--------|
| `showFileMenu` | Boolean | إظهار/إخفاء قائمة الملف |
| `setShowFileMenu` | Function | دالة التحكم في عرض قائمة الملف |
| `showEditMenu` | Boolean | إظهار/إخفاء قائمة التحرير |
| `setShowEditMenu` | Function | دالة التحكم في عرض قائمة التحرير |
| `showViewMenu` | Boolean | إظهار/إخفاء قائمة العرض |
| `setShowViewMenu` | Function | دالة التحكم في عرض قائمة العرض |
| `showToolsMenu` | Boolean | إظهار/إخفاء قائمة الأدوات |
| `setShowToolsMenu` | Function | دالة التحكم في عرض قائمة الأدوات |
| `closeAllMenus` | Function | دالة لإغلاق جميع القوائم |
| `setShowSearchDialog` | Function | دالة لعرض نافذة البحث |
| `setShowReplaceDialog` | Function | دالة لعرض نافذة الاستبدال |
| `setShowCharacterRename` | Function | دالة لعرض نافذة إعادة تسمية الشخصيات |
| `setShowRulers` | Function | دالة للتحكم في إظهار المساطر |
| `isDarkMode` | Boolean | تفعيل/تعطيل الوضع المظلم |

### مثال
```jsx
<MenuBar
  showFileMenu={showFileMenu}
  setShowFileMenu={setShowFileMenu}
  showEditMenu={showEditMenu}
  setShowEditMenu={setShowEditMenu}
  showViewMenu={showViewMenu}
  setShowViewMenu={setShowViewMenu}
  showToolsMenu={showToolsMenu}
  setShowToolsMenu={setShowToolsMenu}
  closeAllMenus={closeAllMenus}
  setShowSearchDialog={setShowSearch}
  setShowReplaceDialog={setShowReplace}
  setShowCharacterRename={setShowRename}
  setShowRulers={setShowRulers}
  isDarkMode={isDarkMode}
/>
```

---

## التكامل بين المكونات

تعمل هذه المكونات معًا لتوفير واجهة مستخدم متكاملة لمحرر النصوص البرمجية. على سبيل المثال:

1. `MenuBar` يوفر وصولاً سهلًا إلى وظائف `Dialogs`
2. `SmartSuggestions` تتفاعل مع `TextEditor` لتقديم اقتراحات ذكية
3. `Rulers` تساعد في تنسيق المحتوى داخل `TextEditor`

## التخصيص

يمكن تخصيص المظهر والسلوك من خلال:

1. **الأنماط (Styles):**
   - تخصيص الألوان والخطوط
   - تعديل المسافات والهوامش

2. **الوظائف (Functions):**
   - تخصيص معالجات الأحداث
   - إضافة وظائف مخصصة

## دليل المطور

### التثبيت

```bash
npm install
```

### التطوير

```bash
npm start
```

### البناء

```bash
npm run build
```

## الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE).


================================================================================
# الملف: H:\حبيبي_يارب\src\constants\README.md
================================================================================

# دليل الثوابت (Constants)

هذا المجلد يحتوي على الثوابت والمتغيرات العامة المستخدمة في التطبيق. يتم تصدير هذه الثوابت من الملف `index.js` الرئيسي.

## محتويات الملف

### 1. مقاييس الصفحة والهوامش
- `A4_PAGE_HEIGHT_PX`: ارتفاع صفحة A4 بالبكسل (1123 بكسل)
- `A4_PAGE_WIDTH_PX`: عرض صفحة A4 بالبكسل (794 بكسل)
- `PAGE_MARGINS`: هوامش الصفحة (بالبكسل) - علوي، سفلي، أيمن، أيسر
- `CONTENT_AREA`: مساحة المحتوى الفعلية بعد استبعاد الهوامش

### 2. تنسيقات النصوص البرمجية (Screenplay Formats)
مصفوفة تحتوي على تنسيقات النصوص البرمجية المدعومة في التطبيق، وتتضمن:
- البسملة
- عناوين المشاهد (3 مستويات)
- الفعل/الحدث
- الشخصيات
- النصوص بين قوسين
- الحوار
- الانتقالات

كل تنسيق يحتوي على:
- معرف فريد (id)
- اسم العرض (label)
- اختصار لوحة المفاتيح (shortcut)
- لون الخلفية (color)
- أيقونة (icon)

### 3. الألوان
مصفوفة تحتوي على ألوان متاحة للاستخدام في التطبيق، ممثلة بقيم HEX.

### 4. الخطوط
قائمة بالخطوط المدعومة في التطبيق، وتشمل:
- خطوط عربية مثل: أميري، القاهرة، تجوّل، المراي، إلخ.
- خطوط إنجليزية مثل: Arial, Tahoma

كل خط يحتوي على:
- القيمة الفنية (value)
- اسم العرض (label)

### 5. أحجام الخطوط
مصفوفة تحتوي على الأحجام المتاحة للنصوص في التطبيق، مقاسة بالنقاط (pt).

## كيفية الاستيراد

يمكنك استيراد أي من هذه الثوابت في أي مكون من مكونات التطبيق كما يلي:

```javascript
import { 
  A4_PAGE_WIDTH_PX, 
  PAGE_MARGINS, 
  screenplayFormats, 
  colors, 
  fonts, 
  textSizes 
} from '../constants';
```

## التحديثات

عند إضافة أي ثوابت جديدة، يرجى تحديث هذا الملف لضمان توثيقها بشكل صحيح.


================================================================================
# الملف: H:\حبيبي_يارب\src\hooks\README.md
================================================================================

# خطافات (Hooks) التطبيق

هذا المجلد يحتوي على خطافات (Hooks) مخصصة تُستخدم في مشروع محرر النصوص البرمجية. هذه الخطافات توفر وظائف قابلة لإعادة الاستخدام عبر مكونات التطبيق المختلفة.

## الملفات المتوفرة

### 1. `useScreenplayEditor.js`

هو الخطاف الرئيسي المسؤول عن إدارة حالة محرر النصوص البرمجية. يوفر واجهة برمجية شاملة للتعامل مع محتوى النص البرمجي وإدارة حالات واجهة المستخدم.

#### الميزات الرئيسية:

1. **إدارة حالة المحرر**
   - تخزين النص الحالي ومحتوى HTML
   - تتبع موضع المؤشر (أفقيًا وعموديًا)
   - إدارة الخط المحدد وحجمه

2. **حالات واجهة المستخدم**
   - إدارة قوائم التنسيق (الخط، الحجم، الألوان)
   - التحكم في ظهور القوائم المنسدلة
   - إدارة حالة مربعات الحوار (البحث، الاستبدال، إعادة تسمية الشخصيات)

3. **إحصائيات المستند**
   - عدد الأحرف والكلمات
   - عدد الصفحات والمشاهد
   - تحديث الإحصائيات تلقائيًا مع تغيير المحتوى

4. **وظائف التنسيق الذكي**
   - دعم التنسيق التلقائي للنصوص
   - معالجة النصوص باستخدام وكلاء الذكاء الاصطناعي
   - معالجة الدُفعات للنصوص الكبيرة

#### كيفية الاستخدام:

```jsx
import { useScreenplayEditor } from '../hooks/useScreenplayEditor';

function MyComponent() {
  const {
    text,
    htmlContent,
    isDarkMode,
    currentFormat,
    // ... other properties and methods
  } = useScreenplayEditor();

  // استخدام الخصائص والدوال المتاحة
  return (
    // واجهة المستخدم
  );
}
```

#### الخصائص والدوال المتاحة:

- **الخصائص (State):**
  - `text`: النص العادي الحالي
  - `htmlContent`: محتوى HTML المنسق
  - `isDarkMode`: حالة الوضع المظلم
  - `currentFormat`: تنسيق النص الحالي
  - `documentStats`: إحصائيات المستند
  - `pageCount`: عدد الصفحات

- **الدوال (Functions):**
  - `updateContent`: تحديث المحتوى
  - `updateCursorPosition`: تحديث موضع المؤشر
  - `closeAllMenus`: إغلاق جميع القوائم
  - `smartFormat`: تنسيق النص ذكيًا
  - `smartFormatBatch`: معالجة مجموعة من النصوص

## إرشادات الاستخدام

1. استورد الخطاف المطلوب في مكون React
2. استخدم الخصائص والدوال المعادة من الخطاف
3. تأكد من توفير العناصر المرجعية (refs) المطلوبة
4. استخدم معالجات الأحداث المتاحة للتفاعل مع المحرر

## التبعيات

- React (الإصدار 16.8 أو أحدث)
- مكتبات إضافية حسب الحاجة (يتم استيرادها في الملفات)

## ملاحظات هامة

- يتم تحديث حالة المحرر تلقائيًا مع تغيير المحتوى
- يدعم الخطاف التكامل مع وكلاء الذكاء الاصطناعي للتنسيق الذكي
- تم تحسين الأداء للتعامل مع المستندات الكبيرة


================================================================================
# الملف: H:\حبيبي_يارب\src\utils\README.md
================================================================================

# أدوات المساعدة (Utilities)

هذا المجلد يحتوي على ملفات JavaScript المساعدة التي توفر وظائف مشتركة ومتكررة الاستخدام في التطبيق.

## الملفات المتوفرة

### 1. `screenplayUtils.js`

#### الوظيفة:
يحتوي على دوال مساعدة لمعالجة وتنسيق النصوص البرمجية (Screenplay) مع التركيز على النصوص العربية.

#### المميزات الرئيسية:

1. **أنماط التعرف (Patterns):**
   - التعرف على أسماء الشخصيات
   - التعرف على عناوين المشاهد
   - التعرف على الكلمات المفتاحية للأفعال والحركات
   - التعرف على الملاحظات الإخراجية

2. **وظائف مساعدة:**
   - `isValidCharacterName`: للتحقق من صحة اسم الشخصية
   - `classifyAction`: لتصنيف نوع الفعل في النص
   - `getFormatStyles`: الحصول على أنماط التنسيق بناءً على نوع العنصر
   - `calculateStats`: حساب إحصائيات المستند
   - `extractStoryElements`: استخراج عناصر القصة من المحتوى

### 2. `pasteHandler.js`

#### الوظيفة:
يدير عملية لصق النص في المحرر مع تنسيقه تلقائيًا حسب نوع المحتوى.

#### المميزات الرئيسية:

1. **معالجة اللصق:**
   - تحليل النص الملصق
   - التنسيق التلقائي للعناصر (مشاهد، شخصيات، حوارات)
   - دعم النصوص متعددة الأسطر

2. **دعم التنسيقات:**
   - عناوين المشاهد
   - أسماء الشخصيات
   - الحوارات
   - الأقواس التوضيحية
   - الملاحظات الإخراجية

### 3. `revisionTracker.js`

#### الوظيفة:
يتتبع التعديلات التي تجرى على المستند ويدير عمليات التراجع والإعادة.

#### المميزات الرئيسية:

1. **إدارة المراجعات:**
   - حفظ نسخ من التعديلات
   - التراجع عن التغييرات
   - إعادة التغييرات الملغاة

2. **مقارنة الإصدارات:**
   - تتبع التغييرات بين الإصدارات
   - عرض الاختلافات بين المراجعات
   - الاحتفاظ بسجل للتعديلات

## كيفية الاستخدام

### استيراد الأدوات:

```javascript
// استيراد أدوات معالجة النصوص البرمجية
import { getFormatStyles, calculateStats } from './utils/screenplayUtils';

// استيراد معالج اللصق
import { handlePaste } from './utils/pasteHandler';

// استيراد متتبع المراجعات
import { RevisionTracker } from './utils/revisionTracker';
```

### مثال على استخدام متتبع المراجعات:

```javascript
const tracker = new RevisionTracker();

// حفظ مراجعة جديدة
tracker.saveRevision(editorContent, 'تعديل أولي');

// التراجع عن آخر تعديل
const previousState = tracker.undo();

// إعادة آخر تعديل
const nextState = tracker.redo();

// الحصول على سجل المراجعات
const history = tracker.getRevisionHistory();
```

## ملاحظات تقنية

- تم تصميم الأدوات لدعم النصوص العربية بشكل كامل
- تدعم التنسيق التلقائي للعناصر البرمجية
- توفر واجهة برمجية سهلة الاستخدام
- يمكن توسيعها بسهولة لإضافة مميزات جديدة

## التبعيات

- متصفح ويب حديث يدعم JavaScript (ES6+)
- مكتبات إضافية قد تكون مطلوبة حسب التطبيق الرئيسي
